(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[136],{1218:function(e,t,a){Promise.resolve().then(a.bind(a,7733))},7733:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return z}});var r=a(7437),o=a(7138),s=a(2265),n=a(9343),i=a(1014),l=a(537);let d=l.Rx().finite().min(0,"Valor inv\xe1lido"),c=l.Ry({id:l.Z_().min(1),name:l.Z_().min(1,"Nome obrigat\xf3rio"),addressLine:l.Z_().min(1,"Endere\xe7o obrigat\xf3rio"),approxAssets:l.Rx().int().min(0),lat:l.Rx().optional(),lng:l.Rx().optional()}),m=l.Ry({id:l.Z_().min(1),city:l.Z_().min(1,"Cidade obrigat\xf3ria"),arrivalTransportNote:l.Z_().optional(),intercityCost:d.optional(),hotelName:l.Z_().optional(),hotelNightly:d,localTransportPerDay:d,stores:l.IX(c).min(1,"Inclua pelo menos uma loja")}),h=l.Ry({breakfast:d,lunch:d,dinner:d,water:d}),u=l.Ry({technicianName:l.Z_().min(1,"Nome \xe9 obrigat\xf3rio"),originCity:l.Z_().min(1,"Cidade de origem \xe9 obrigat\xf3ria"),startDateISO:l.Z_().min(1,"Data de in\xedcio \xe9 obrigat\xf3ria"),assetsPerDay:l.Rx().int().positive("Produtividade deve ser positiva"),technicianDailyRate:d,perDiem:h,workWeekends:l.O7().default(!1)}),x=l.Ry({global:u,itinerary:l.IX(m).min(1,"Inclua pelo menos uma cidade"),returnTransportCost:d.optional()});function p(e){let{label:t,value:a,onChange:o,placeholder:n="0,00",className:i=""}=e,l=(0,s.useMemo)(()=>{let e="number"==typeof a&&isFinite(a)?a:0;return new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e)},[a]);return(0,r.jsxs)("div",{className:"space-y-2 ".concat(i),children:[t&&(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:t}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,r.jsx)("input",{type:"text",className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-gray-900 placeholder-gray-400",value:l,onChange:e=>{let t=e.target.value,a=parseFloat(t.replace(/[^\d,]/g,"").replace(",","."));!isNaN(a)&&isFinite(a)?o(a):(""===t||"R$ "===t)&&o(0)},placeholder:n,onFocus:e=>e.target.select()})]})]})}function g(e){var t,a,o,l,d,c;let{initial:m,onSubmit:h}=e,[u,g]=(0,s.useState)(m?"Planejamento Existente":""),[y,j]=(0,s.useState)(!m),f=(0,n.cI)({resolver:(0,i.F)(x),defaultValues:m||{global:{technicianName:"",originCity:"",startDateISO:"2025-01-01",assetsPerDay:150,technicianDailyRate:0,perDiem:{breakfast:0,lunch:0,dinner:0,water:0},workWeekends:!1},itinerary:[],returnTransportCost:0}}),{fields:v,append:N,remove:w}=(0,n.Dq)({control:f.control,name:"itinerary"}),k=()=>{N({id:crypto.randomUUID(),city:"",arrivalTransportNote:"",intercityCost:0,hotelName:"",hotelNightly:0,localTransportPerDay:0,stores:[]})},C=e=>{w(e)};return(0,r.jsxs)("form",{onSubmit:f.handleSubmit(e=>{if(!u.trim()){j(!0);return}h(e,u.trim())}),className:"space-y-8",children:[y&&(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"T\xedtulo do Planejamento"})]})}),(0,r.jsx)("div",{className:"p-8",children:(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nome do Planejamento"}),(0,r.jsx)("input",{type:"text",value:u,onChange:e=>g(e.target.value),placeholder:"Ex: Invent\xe1rio Regi\xe3o Sul - Janeiro 2025",className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200",required:!0}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"D\xea um nome descritivo para facilitar a identifica\xe7\xe3o futura"})]})})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Par\xe2metros Globais"})]})}),(0,r.jsxs)("div",{className:"p-8 space-y-6",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Nome do T\xe9cnico"}),(0,r.jsx)("input",{...f.register("global.technicianName"),className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Nome completo do t\xe9cnico"}),(null===(t=f.formState.errors.global)||void 0===t?void 0:t.technicianName)&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:f.formState.errors.global.technicianName.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Cidade de Origem"}),(0,r.jsx)("input",{...f.register("global.originCity"),className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"Ex: Fortaleza, CE"}),(null===(a=f.formState.errors.global)||void 0===a?void 0:a.originCity)&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:f.formState.errors.global.originCity.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Data de In\xedcio"}),(0,r.jsx)("input",{type:"date",...f.register("global.startDateISO"),className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200"}),(null===(o=f.formState.errors.global)||void 0===o?void 0:o.startDateISO)&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:f.formState.errors.global.startDateISO.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Produtividade (bens/dia)"}),(0,r.jsx)("input",{type:"number",...f.register("global.assetsPerDay",{valueAsNumber:!0}),className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200",placeholder:"150",min:"1"}),(null===(l=f.formState.errors.global)||void 0===l?void 0:l.assetsPerDay)&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:f.formState.errors.global.assetsPerDay.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(p,{label:"Di\xe1ria do T\xe9cnico",value:f.watch("global.technicianDailyRate"),onChange:e=>f.setValue("global.technicianDailyRate",e),placeholder:"0,00"}),(null===(d=f.formState.errors.global)||void 0===d?void 0:d.technicianDailyRate)&&(0,r.jsx)("p",{className:"text-red-500 text-sm",children:f.formState.errors.global.technicianDailyRate.message})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Finais de Semana"}),(0,r.jsxs)("div",{className:"flex items-center space-x-3 pt-3",children:[(0,r.jsxs)("label",{className:"relative inline-flex items-center cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",className:"sr-only peer",...f.register("global.workWeekends")}),(0,r.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:f.watch("global.workWeekends")?"Trabalhar finais de semana":"Respeitar finais de semana"})]})]})]}),(0,r.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Per Diem (Alimenta\xe7\xe3o e Hidrata\xe7\xe3o)"]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,r.jsx)(p,{label:"Caf\xe9 da Manh\xe3",value:f.watch("global.perDiem.breakfast"),onChange:e=>f.setValue("global.perDiem.breakfast",e),placeholder:"0,00"}),(0,r.jsx)(p,{label:"Almo\xe7o",value:f.watch("global.perDiem.lunch"),onChange:e=>f.setValue("global.perDiem.lunch",e),placeholder:"0,00"}),(0,r.jsx)(p,{label:"Jantar",value:f.watch("global.perDiem.dinner"),onChange:e=>f.setValue("global.perDiem.dinner",e),placeholder:"0,00"}),(0,r.jsx)(p,{label:"\xc1gua",value:f.watch("global.perDiem.water"),onChange:e=>f.setValue("global.perDiem.water",e),placeholder:"0,00"})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m0 0L9 7"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Itiner\xe1rio"})]}),(0,r.jsxs)("button",{type:"button",onClick:k,className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,r.jsx)("span",{children:"Adicionar Cidade"})]})]})}),(0,r.jsxs)("div",{className:"p-8 space-y-6",children:[v.map((e,t)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-xl p-6 bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,r.jsxs)("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Cidade ",t+1]}),(0,r.jsx)("button",{type:"button",onClick:()=>C(t),className:"text-red-500 hover:text-red-700 transition-colors duration-200",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Nome da Cidade"}),(0,r.jsx)("input",{...f.register("itinerary.".concat(t,".city")),className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",placeholder:"Ex: Campinas, SP"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Nome do Hotel"}),(0,r.jsx)("input",{...f.register("itinerary.".concat(t,".hotelName")),className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",placeholder:"Nome do hotel"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Di\xe1ria do Hotel"}),(0,r.jsx)(p,{value:f.watch("itinerary.".concat(t,".hotelNightly")),onChange:e=>f.setValue("itinerary.".concat(t,".hotelNightly"),e),placeholder:"0,00"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Transporte Local (dia)"}),(0,r.jsx)(p,{value:f.watch("itinerary.".concat(t,".localTransportPerDay")),onChange:e=>f.setValue("itinerary.".concat(t,".localTransportPerDay"),e),placeholder:"0,00"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Custo Intermunicipal"}),(0,r.jsx)(p,{value:f.watch("itinerary.".concat(t,".intercityCost"))||0,onChange:e=>f.setValue("itinerary.".concat(t,".intercityCost"),e),placeholder:"0,00"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Nota de Transporte"}),(0,r.jsx)("input",{...f.register("itinerary.".concat(t,".arrivalTransportNote")),className:"block w-full px-4 py-3 border border-gray-300 rounded-xl shadow-sm focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",placeholder:"Voo, \xf4nibus, etc."})]})]}),(0,r.jsx)(b,{cityIndex:t,form:f})]},e.id)),0===v.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsxs)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhuma Cidade Adicionada"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["Clique em ",'"',"Adicionar Cidade",'"'," para come\xe7ar a definir seu itiner\xe1rio."]}),(0,r.jsxs)("button",{type:"button",onClick:k,className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[(0,r.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Adicionar Primeira Cidade"]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m0 0L9 7"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Custo de Retorno"})]})}),(0,r.jsx)("div",{className:"p-8",children:(0,r.jsxs)("div",{className:"max-w-md",children:[(0,r.jsx)(p,{label:"Custo de Retorno \xe0 Cidade de Origem",value:null!==(c=f.watch("returnTransportCost"))&&void 0!==c?c:0,onChange:e=>f.setValue("returnTransportCost",e),placeholder:"0,00"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Custo estimado para retornar do \xfaltimo destino \xe0 cidade de origem"})]})})]}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsxs)("button",{type:"submit",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-12 py-4 rounded-2xl text-xl font-semibold transition-all duration-200 shadow-2xl hover:shadow-3xl transform hover:-translate-y-2 flex items-center space-x-3",children:[(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,r.jsx)("span",{children:"Salvar Planejamento"})]})})]})}function b(e){let{cityIndex:t,form:a}=e,o=a.watch("itinerary.".concat(t,".stores")),s=()=>{let e=a.getValues("itinerary.".concat(t,".stores"));a.setValue("itinerary.".concat(t,".stores"),[...e,{id:crypto.randomUUID(),name:"",addressLine:"",approxAssets:0}])},n=e=>{let r=a.getValues("itinerary.".concat(t,".stores")).filter((t,a)=>a!==e);a.setValue("itinerary.".concat(t,".stores"),r)};return(0,r.jsxs)("div",{className:"bg-white rounded-xl p-6 border border-gray-200 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("h4",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-green-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Unidades"]}),(0,r.jsxs)("button",{type:"button",className:"bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center space-x-2",onClick:s,children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,r.jsx)("span",{children:"Adicionar Unidade"})]})]}),o&&o.length>0?(0,r.jsx)("div",{className:"space-y-4",children:o.map((e,o)=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,r.jsxs)("h5",{className:"font-medium text-gray-800",children:["Unidade ",o+1]}),(0,r.jsx)("button",{type:"button",onClick:()=>n(o),className:"text-red-500 hover:text-red-700 transition-colors duration-200",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nome da Unidade"}),(0,r.jsx)("input",{...a.register("itinerary.".concat(t,".stores.").concat(o,".name")),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",placeholder:"Nome da unidade"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Endere\xe7o"}),(0,r.jsx)("input",{...a.register("itinerary.".concat(t,".stores.").concat(o,".addressLine")),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",placeholder:"Endere\xe7o completo"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Bens Estimados"}),(0,r.jsx)("input",{type:"number",...a.register("itinerary.".concat(t,".stores.").concat(o,".approxAssets"),{valueAsNumber:!0}),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",placeholder:"0",min:"0"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Coordenadas (opcional)"}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,r.jsx)("input",{type:"number",step:"any",...a.register("itinerary.".concat(t,".stores.").concat(o,".lat"),{valueAsNumber:!0}),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",placeholder:"Latitude"}),(0,r.jsx)("input",{type:"number",step:"any",...a.register("itinerary.".concat(t,".stores.").concat(o,".lng"),{valueAsNumber:!0}),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-200",placeholder:"Longitude"})]})]})]})]},e.id))}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),(0,r.jsx)("p",{className:"text-gray-500 text-sm mb-3",children:"Nenhuma unidade adicionada nesta cidade"}),(0,r.jsx)("button",{type:"button",onClick:s,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200",children:"Adicionar Primeira Unidade"})]})]})}var y=a(5735),j=a(5236),f=a(9842),v=a(9854),N=a(357);let w={apiKey:N.env.NEXT_PUBLIC_FIREBASE_API_KEY||"demo-key",authDomain:N.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN||"demo.firebaseapp.com",projectId:N.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID||"demo-project",storageBucket:N.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET||"demo-project.appspot.com",messagingSenderId:N.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID||"123456789",appId:N.env.NEXT_PUBLIC_FIREBASE_APP_ID||"demo-app-id"},k=N.env.NEXT_PUBLIC_FIREBASE_API_KEY&&N.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,C=null,D=null,E=null,S=null;if(k)try{C=(0,j.ZF)(w),D=(0,f.ad)(C),E=(0,y.v0)(C),S=(0,v.cF)(C)}catch(e){console.warn("Firebase initialization failed:",e)}else console.warn("Firebase credentials not found. Using mock services for development.");let L="planners",A="attachments";async function T(e,t,a){try{let r={title:t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),technicianName:e.global.technicianName,originCity:e.global.originCity,totalCities:e.itinerary.length,totalStores:e.itinerary.reduce((e,t)=>e+t.stores.length,0),estimatedDays:Math.ceil(e.itinerary.reduce((e,t)=>e+t.stores.reduce((e,t)=>e+t.approxAssets,0),0)/e.global.assetsPerDay),data:e,userId:a||"anonymous",createdAt:(0,f.Bt)(),updatedAt:(0,f.Bt)()};return(await (0,f.ET)((0,f.hJ)(D,L),r)).id}catch(e){throw console.error("Erro ao salvar planejamento no Firebase:",e),Error("Falha ao salvar planejamento no Firebase")}}async function I(e){try{let t=e?(0,f.IO)((0,f.hJ)(D,L),(0,f.ar)("userId","==",e),(0,f.Xo)("updatedAt","desc")):(0,f.IO)((0,f.hJ)(D,L),(0,f.Xo)("updatedAt","desc")),a=await (0,f.PL)(t),r=[];return a.forEach(e=>{var t,a,o,s,n,i;let l=e.data();r.push({id:e.id,title:l.title,createdAt:(null===(o=l.createdAt)||void 0===o?void 0:null===(a=o.toDate)||void 0===a?void 0:null===(t=a.call(o))||void 0===t?void 0:t.toISOString())||l.createdAt,updatedAt:(null===(i=l.updatedAt)||void 0===i?void 0:null===(n=i.toDate)||void 0===n?void 0:null===(s=n.call(i))||void 0===s?void 0:s.toISOString())||l.updatedAt,technicianName:l.technicianName,originCity:l.originCity,totalCities:l.totalCities,totalStores:l.totalStores,estimatedDays:l.estimatedDays})}),r}catch(e){throw console.error("Erro ao carregar planejamentos do Firebase:",e),Error("Falha ao carregar planejamentos do Firebase")}}async function R(e){try{let i=(0,f.JU)(D,L,e),l=await (0,f.QT)(i);if(l.exists()){var t,a,r,o,s,n;let e=l.data();return{metadata:{id:l.id,title:e.title,createdAt:(null===(r=e.createdAt)||void 0===r?void 0:null===(a=r.toDate)||void 0===a?void 0:null===(t=a.call(r))||void 0===t?void 0:t.toISOString())||e.createdAt,updatedAt:(null===(n=e.updatedAt)||void 0===n?void 0:null===(s=n.toDate)||void 0===s?void 0:null===(o=s.call(n))||void 0===o?void 0:o.toISOString())||e.updatedAt,technicianName:e.technicianName,originCity:e.originCity,totalCities:e.totalCities,totalStores:e.totalStores,estimatedDays:e.estimatedDays},data:e.data}}return null}catch(e){throw console.error("Erro ao carregar planejamento do Firebase:",e),Error("Falha ao carregar planejamento do Firebase")}}async function P(e,t){try{let a=(0,f.JU)(D,L,e);return await (0,f.r7)(a,{title:t,updatedAt:(0,f.Bt)()}),!0}catch(e){throw console.error("Erro ao atualizar t\xedtulo no Firebase:",e),Error("Falha ao atualizar t\xedtulo no Firebase")}}async function M(e){try{let t=(0,f.JU)(D,L,e);return await (0,f.oe)(t),!0}catch(e){throw console.error("Erro ao excluir planejamento do Firebase:",e),Error("Falha ao excluir planejamento do Firebase")}}async function B(e,t,a){try{let r="".concat(Date.now(),"_").concat(e.name),o="attachments/".concat(a||"anonymous","/").concat(t,"/").concat(r),s=(0,v.iH)(S,o),n=await (0,v.KV)(s,e),i=await (0,v.Jt)(n.ref);return await (0,f.ET)((0,f.hJ)(D,A),{plannerId:t,userId:a||"anonymous",fileName:e.name,filePath:o,downloadURL:i,fileSize:e.size,mimeType:e.type,createdAt:(0,f.Bt)()}),i}catch(e){throw console.error("Erro ao fazer upload do anexo:",e),Error("Falha ao fazer upload do anexo")}}async function O(e){try{let t=(0,f.IO)((0,f.hJ)(D,A),(0,f.ar)("plannerId","==",e)),a=await (0,f.PL)(t),r=[];return a.forEach(e=>{var t,a,o;let s=e.data();r.push({id:e.id,...s,createdAt:(null===(o=s.createdAt)||void 0===o?void 0:null===(a=o.toDate)||void 0===a?void 0:null===(t=a.call(o))||void 0===t?void 0:t.toISOString())||s.createdAt})}),r}catch(e){throw console.error("Erro ao carregar anexos:",e),Error("Falha ao carregar anexos")}}async function F(e,t){try{let a=(0,v.iH)(S,t);await (0,v.oq)(a);let r=(0,f.JU)(D,A,e);return await (0,f.oe)(r),!0}catch(e){throw console.error("Erro ao excluir anexo:",e),Error("Falha ao excluir anexo")}}function V(){let[e,t]=(0,s.useState)(null),[a,r]=(0,s.useState)(!1),[o,n]=(0,s.useState)(null);(0,s.useEffect)(()=>{if(E){let e=(0,y.Aj)(E,e=>{t(e),r(!1)});return()=>e()}r(!1),n("Firebase n\xe3o configurado. Configure as credenciais para usar funcionalidades completas.")},[]);let i=async(t,a)=>{try{if(n(null),!D)throw Error("Firebase n\xe3o configurado. Configure as credenciais para salvar planejamentos.");return await T(t,a,null==e?void 0:e.uid)}catch(e){throw n(e instanceof Error?e.message:"Erro desconhecido"),e}},l=async()=>{try{if(n(null),!D)throw Error("Firebase n\xe3o configurado. Configure as credenciais para carregar planejamentos.");return await I(null==e?void 0:e.uid)}catch(e){throw n(e instanceof Error?e.message:"Erro desconhecido"),e}},d=async(t,a)=>{try{return n(null),await B(t,a,null==e?void 0:e.uid)}catch(e){throw n(e instanceof Error?e.message:"Erro desconhecido"),e}};return{user:e,loading:a,error:o,savePlanner:i,loadAllPlanners:l,loadPlannerById:async e=>{try{return n(null),await R(e)}catch(e){throw n(e instanceof Error?e.message:"Erro desconhecido"),e}},updatePlannerTitle:async(e,t)=>{try{return n(null),await P(e,t)}catch(e){throw n(e instanceof Error?e.message:"Erro desconhecido"),e}},deletePlanner:async e=>{try{return n(null),await M(e)}catch(e){throw n(e instanceof Error?e.message:"Erro desconhecido"),e}},uploadFile:d,getAttachments:async e=>{try{return n(null),await O(e)}catch(e){throw n(e instanceof Error?e.message:"Erro desconhecido"),e}},deleteFile:async(e,t)=>{try{return n(null),await F(e,t)}catch(e){throw n(e instanceof Error?e.message:"Erro desconhecido"),e}}}}var _=a(5074);function U(e){let{onSelectPlanner:t,onExportPlanner:a}=e,{loadAllPlanners:o,loadPlannerById:n,updatePlannerTitle:i,deletePlanner:l,loading:d,error:c}=V(),[m,h]=(0,s.useState)([]),[u,x]=(0,s.useState)(null),[p,g]=(0,s.useState)(""),[b,y]=(0,s.useState)(null);(0,s.useEffect)(()=>{j()},[]);let j=async()=>{try{let e=await o();h(e.sort((e,t)=>new Date(t.updatedAt).getTime()-new Date(e.updatedAt).getTime()))}catch(e){console.error("Erro ao carregar planejamentos:",e)}},f=e=>{x(e.id),g(e.title)},v=async e=>{if(p.trim())try{await i(e,p.trim()),await j()}catch(e){console.error("Erro ao atualizar t\xedtulo:",e),alert("Erro ao atualizar t\xedtulo. Tente novamente.")}x(null),g("")},N=()=>{x(null),g("")},w=async e=>{if(confirm("Tem certeza que deseja excluir este planejamento? Esta a\xe7\xe3o n\xe3o pode ser desfeita."))try{await l(e),await j(),b===e&&y(null)}catch(e){console.error("Erro ao excluir planejamento:",e),alert("Erro ao excluir planejamento. Tente novamente.")}},k=async e=>{try{let a=await n(e);a&&(y(e),t(a))}catch(e){console.error("Erro ao carregar planejamento:",e),alert("Erro ao carregar planejamento. Tente novamente.")}},C=async e=>{try{let t=await n(e);if(t){let e=(0,_.a)(t.data,{dailyWorkingHours:8,travelHoursPerLeg:2});a?a(t,e):function(e,t){let a=function(e,t){let{metadata:a,data:r}=e,o=[["INVENTORY ROUTE PLANNER - EXPORTA\xc7\xc3O"],[""],["METADADOS DO PLANEJAMENTO"],["T\xedtulo",a.title],["T\xe9cnico",a.technicianName],["Cidade de Origem",a.originCity],["Total de Cidades",a.totalCities.toString()],["Total de Unidades",a.totalStores.toString()],["Dias Estimados",a.estimatedDays.toString()],["Criado em",new Date(a.createdAt).toLocaleDateString("pt-BR")],["Atualizado em",new Date(a.updatedAt).toLocaleDateString("pt-BR")],[""],["PAR\xc2METROS GLOBAIS"],["Produtividade (bens/dia)",r.global.assetsPerDay.toString()],["Di\xe1ria do T\xe9cnico","R$ ".concat(r.global.technicianDailyRate.toFixed(2))],["Data de In\xedcio",new Date(r.global.startDateISO).toLocaleDateString("pt-BR")],["Trabalhar Finais de Semana",r.global.workWeekends?"Sim":"N\xe3o"],[""],["PER DIEM"],["Caf\xe9 da Manh\xe3","R$ ".concat(r.global.perDiem.breakfast.toFixed(2))],["Almo\xe7o","R$ ".concat(r.global.perDiem.lunch.toFixed(2))],["Jantar","R$ ".concat(r.global.perDiem.dinner.toFixed(2))],["\xc1gua","R$ ".concat(r.global.perDiem.water.toFixed(2))],[""],["ITINER\xc1RIO DETALHADO"]];return o.push(["Ordem","Cidade","Hotel","Di\xe1ria do Hotel","Transporte Local/Dia","Custo Intermunicipal","Unidades","Total de Bens"]),r.itinerary.forEach((e,t)=>{let a=e.stores.reduce((e,t)=>e+t.approxAssets,0);o.push([(t+1).toString(),e.city,e.hotelName||"-",e.hotelNightly?"R$ ".concat(e.hotelNightly.toFixed(2)):"-",e.localTransportPerDay?"R$ ".concat(e.localTransportPerDay.toFixed(2)):"-",e.intercityCost?"R$ ".concat(e.intercityCost.toFixed(2)):"-",e.stores.length.toString(),a.toString()])}),o.push([""]),o.push(["DETALHAMENTO DAS UNIDADES"]),o.push(["Cidade","Nome da Unidade","Endere\xe7o","Bens Estimados","Coordenadas"]),r.itinerary.forEach(e=>{e.stores.forEach(t=>{let a=t.lat&&t.lng?"".concat(t.lat,", ").concat(t.lng):"-";o.push([e.city,t.name,t.addressLine,t.approxAssets.toString(),a])})}),t&&(o.push([""]),o.push(["CRONOGRAMA EXECUTIVO"]),o.push(["Data","Tipo","Cidade","Detalhes","Bens Processados","Custo Transporte","Custo Hospedagem","Custo Alimenta\xe7\xe3o","Custo T\xe9cnico"]),t.days.forEach(e=>{o.push([new Date(e.dateISO).toLocaleDateString("pt-BR"),"TRAVEL"===e.type?"Viagem":"INVENTORY"===e.type?"Invent\xe1rio":"RETURN"===e.type?"Retorno":"DESCANSO"===e.type?"Descanso":"Desconhecido","DESCANSO"===e.type?"Fim de Semana":e.city,"DESCANSO"===e.type?"Descanso - S\xe1bado/Domingo":e.detail,"DESCANSO"===e.type?"-":e.assetsProcessed.toString(),"DESCANSO"===e.type?"-":"R$ ".concat(e.costs.transport.toFixed(2)),"DESCANSO"===e.type?"-":"R$ ".concat(e.costs.lodging.toFixed(2)),"DESCANSO"===e.type?"-":"R$ ".concat(e.costs.perDiem.toFixed(2)),"DESCANSO"===e.type?"-":"R$ ".concat(e.costs.technician.toFixed(2))])}),o.push([""]),o.push(["RESUMO DE CUSTOS"]),o.push(["Item","Valor"]),o.push(["Total de Dias",t.totalDays.toString()]),o.push(["Total de Bens",t.totalAssets.toString()]),o.push(["Custo Total","R$ ".concat(t.totalCosts.toFixed(2))])),r.returnTransportCost&&o.push(["Custo de Retorno","R$ ".concat(r.returnTransportCost.toFixed(2))]),o.map(e=>e.map(e=>"string"==typeof e&&e.includes(",")?'"'.concat(e,'"'):e).join(",")).join("\n")}(e,t);!function(e,t){let a=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a");if(void 0!==r.download){let e=URL.createObjectURL(a);r.setAttribute("href",e),r.setAttribute("download","".concat(t,".csv")),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}(a,"planejamento_".concat(e.metadata.title.replace(/[^a-zA-Z0-9]/g,"_"),"_").concat(new Date().toISOString().split("T")[0]))}(t,e)}}catch(e){console.error("Erro ao exportar:",e),alert("Erro ao exportar o planejamento. Tente novamente.")}},D=e=>new Date(e).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"});return 0===m.length?(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8 text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum Planejamento Salvo"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Crie seu primeiro planejamento para come\xe7ar a organizar suas rotas de invent\xe1rio."})]}):(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-8 py-6",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-lg flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Meus Planejamentos"})]})}),(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"space-y-4",children:m.map(e=>(0,r.jsx)("div",{className:"border rounded-xl p-4 transition-all duration-200 ".concat(b===e.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[u===e.id?(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"text",value:p,onChange:e=>g(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",onKeyPress:t=>"Enter"===t.key&&v(e.id),autoFocus:!0}),(0,r.jsx)("button",{onClick:()=>v(e.id),className:"px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors duration-200",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("button",{onClick:N,className:"px-3 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors duration-200",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:e.title}),(0,r.jsx)("button",{onClick:()=>f(e),className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",title:"Editar t\xedtulo",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]}),(0,r.jsxs)("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"T\xe9cnico:"})," ",e.technicianName]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Origem:"})," ",e.originCity]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Cidades:"})," ",e.totalCities]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Unidades:"})," ",e.totalStores]})]}),(0,r.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:["Criado: ",D(e.createdAt)," | Atualizado: ",D(e.updatedAt)]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,r.jsx)("button",{onClick:()=>k(e.id),className:"px-4 py-2 rounded-lg font-medium transition-all duration-200 ".concat(b===e.id?"bg-blue-100 text-blue-700 border border-blue-200":"bg-blue-600 text-white hover:bg-blue-700"),children:b===e.id?"Selecionado":"Selecionar"}),(0,r.jsxs)("button",{onClick:()=>C(e.id),className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 flex items-center space-x-2",title:"Exportar para Excel",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),(0,r.jsx)("span",{className:"hidden sm:inline",children:"Exportar"})]}),(0,r.jsx)("button",{onClick:()=>w(e.id),className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors duration-200",title:"Excluir planejamento",children:(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},e.id))})})]})}function W(){return(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-xl p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Firebase N\xe3o Configurado"}),(0,r.jsx)("p",{className:"text-yellow-700 mb-4",children:"Para usar todas as funcionalidades (salvar planejamentos, anexos, etc.), voc\xea precisa configurar o Firebase. Por enquanto, voc\xea pode usar o modo de demonstra\xe7\xe3o."}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-yellow-200",children:[(0,r.jsx)("h4",{className:"font-medium text-yellow-800 mb-2",children:"Como configurar:"}),(0,r.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-sm text-yellow-700",children:[(0,r.jsxs)("li",{children:["Crie um projeto no ",(0,r.jsx)("a",{href:"https://console.firebase.google.com/",target:"_blank",rel:"noopener noreferrer",className:"underline hover:text-yellow-800",children:"Firebase Console"})]}),(0,r.jsx)("li",{children:"Habilite Firestore Database e Storage"}),(0,r.jsxs)("li",{children:["Crie um arquivo ",(0,r.jsx)("code",{className:"bg-yellow-100 px-1 rounded",children:".env.local"})," na raiz do projeto"]}),(0,r.jsx)("li",{children:"Adicione suas credenciais do Firebase"}),(0,r.jsx)("li",{children:"Reinicie o servidor de desenvolvimento"})]}),(0,r.jsxs)("p",{className:"text-xs text-yellow-600 mt-2",children:["Veja o arquivo ",(0,r.jsx)("code",{className:"bg-yellow-100 px-1 rounded",children:"FIREBASE_SETUP.md"})," para instru\xe7\xf5es detalhadas."]})]})]})]})})}let H={global:{technicianName:"Jo\xe3o Silva",originCity:"S\xe3o Paulo",startDateISO:"2025-01-01",assetsPerDay:150,technicianDailyRate:200,perDiem:{breakfast:15,lunch:25,dinner:30,water:5},workWeekends:!1},itinerary:[{id:crypto.randomUUID(),city:"Campinas",arrivalTransportNote:"\xd4nibus executivo",intercityCost:45,hotelName:"Hotel Campinas Plaza",hotelNightly:120,localTransportPerDay:25,stores:[{id:crypto.randomUUID(),name:"Loja Centro",addressLine:"Rua das Flores, 123, Centro",approxAssets:200},{id:crypto.randomUUID(),name:"Loja Taquaral",addressLine:"Av. Taquaral, 456, Taquaral",approxAssets:150}]},{id:crypto.randomUUID(),city:"Sorocaba",arrivalTransportNote:"Van compartilhada",intercityCost:35,hotelName:"Hotel Sorocaba Business",hotelNightly:100,localTransportPerDay:20,stores:[{id:crypto.randomUUID(),name:"Loja Sorocaba",addressLine:"Rua da Paz, 789, Centro",approxAssets:180}]}],returnTransportCost:40};function z(){let{savePlanner:e,error:t}=V(),[a,n]=(0,s.useState)(null),[i,l]=(0,s.useState)(!1),[d,c]=(0,s.useState)(!1),m=async(t,a)=>{try{let r=await e(t,a);alert('Planejamento "'.concat(a,'" salvo com sucesso! ID: ').concat(r)),l(!1),c(!0)}catch(e){console.error("Erro ao salvar:",e),alert("Erro ao salvar o planejamento. Tente novamente.")}};return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",children:[(0,r.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(o.default,{href:"/",className:"text-gray-500 hover:text-gray-700 transition-colors duration-200",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Planejador de Rotas"})]}),(0,r.jsx)("div",{className:"flex items-center space-x-4",children:(0,r.jsxs)(o.default,{href:"/planner/schedule",className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 flex items-center space-x-2 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),(0,r.jsx)("span",{children:"Ver Cronograma"})]})})]})})}),(0,r.jsx)("div",{className:"py-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[t&&(0,r.jsx)(W,{}),!i&&!d&&(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-full mb-6 shadow-lg",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m0 0L9 7"})})}),(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Bem-vindo ao Planejador de Rotas"}),(0,r.jsx)("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Crie novos planejamentos, carregue exemplos ou gerencie seus planejamentos existentes"}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,r.jsxs)("button",{onClick:()=>{n(null),l(!0),c(!1)},className:"bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center justify-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),(0,r.jsx)("span",{children:"Criar Novo Planejamento"})]}),(0,r.jsxs)("button",{onClick:()=>{n(H),l(!0),c(!1)},className:"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center justify-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsx)("span",{children:"Carregar Exemplo"})]}),(0,r.jsxs)("button",{onClick:()=>c(!0),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white px-8 py-4 rounded-xl font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1 flex items-center justify-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),(0,r.jsx)("span",{children:"Gerenciar Planejamentos"})]})]})]}),i&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:a?"Editando Planejamento":"Novo Planejamento"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:a?"Modifique os dados do planejamento selecionado":"Preencha os dados para criar um novo planejamento"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[a&&(0,r.jsxs)("button",{onClick:()=>{alert("Funcionalidade de rascunho temporariamente indispon\xedvel.")},className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),(0,r.jsx)("span",{children:"Limpar Rascunho"})]}),(0,r.jsxs)("button",{onClick:()=>{l(!1),c(!0),n(null)},className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,r.jsx)("span",{children:"Voltar"})]})]})]}),(0,r.jsx)(g,{initial:a||void 0,onSubmit:m})]}),d&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Gerenciar Planejamentos"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Visualize, edite e exporte seus planejamentos salvos"})]}),(0,r.jsxs)("button",{onClick:()=>c(!1),className:"px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg font-medium transition-colors duration-200 flex items-center space-x-2",children:[(0,r.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),(0,r.jsx)("span",{children:"Voltar"})]})]}),(0,r.jsx)(U,{onSelectPlanner:e=>{n(e.data),l(!0),c(!1)},onExportPlanner:e=>{console.log("Exportando planejamento:",e.metadata.title)}})]}),!i&&!d&&(0,r.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mt-12",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center mb-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"T\xe9cnico"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Defina o nome do t\xe9cnico, cidade de origem e par\xe2metros de produtividade para o planejamento."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-emerald-500 rounded-xl flex items-center justify-center mb-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-1.447-.894L15 4m0 13V4m0 0L9 7"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Itiner\xe1rio"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Configure as cidades a visitar, hot\xe9is, custos de transporte e unidades em cada local."})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[(0,r.jsx)("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl flex items-center justify-center mb-4",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Custos"}),(0,r.jsx)("p",{className:"text-gray-600 text-sm",children:"Controle despesas com hospedagem, alimenta\xe7\xe3o, transporte e di\xe1rias t\xe9cnicas."})]})]})]})})]})}},5074:function(e,t,a){"use strict";function r(e,t){let{dailyWorkingHours:a=8,travelHoursPerLeg:r=2}=t,o=e.global.assetsPerDay||150,s=e.global.workWeekends||!1,n=[],i=new Date(e.global.startDateISO),l=0,d=e=>{let t=e.getDay();return 0===t||6===t},c=(e,t)=>{if(s)return;let a=new Date(e);for(a.setDate(a.getDate()+1);a<t;)d(a)&&n.push({dateISO:a.toISOString().split("T")[0],type:"DESCANSO",city:"Fim de Semana",detail:"Descanso - S\xe1bado/Domingo",assetsProcessed:0,costs:{transport:0,lodging:0,perDiem:0,technician:0}}),a.setDate(a.getDate()+1)},m=e=>{let t=new Date(e);if(t.setDate(t.getDate()+1),!s)for(;d(t);)t.setDate(t.getDate()+1);return t};e.itinerary.length>0&&(n.push({dateISO:i.toISOString().split("T")[0],type:"TRAVEL",city:e.itinerary[0].city,detail:"Entrada/Deslocamento/Sa\xedda: ".concat(e.itinerary[0].city),assetsProcessed:0,costs:{transport:e.itinerary[0].intercityCost||0,lodging:0,perDiem:0,technician:0}}),c(new Date(i),i=m(i)));for(let t=0;t<e.itinerary.length;t++){let a=e.itinerary[t],r=a.stores.reduce((e,t)=>e+(t.approxAssets||0),0),s=Math.ceil(r/o);for(let t=0;t<s;t++){let s=r-t*o,d=Math.min(o,s);n.push({dateISO:i.toISOString().split("T")[0],type:"INVENTORY",city:a.city,detail:"Unidades: ".concat(a.stores.length," | ").concat(d," bens (hotel  unidade)"),assetsProcessed:d,costs:{transport:a.localTransportPerDay||0,lodging:a.hotelNightly||0,perDiem:Object.values(e.global.perDiem).reduce((e,t)=>e+t,0),technician:e.global.technicianDailyRate||0}}),l+=d,c(new Date(i),i=m(i))}if(t<e.itinerary.length-1){let a=e.itinerary[t+1];n.push({dateISO:i.toISOString().split("T")[0],type:"TRAVEL",city:a.city,detail:"Entrada/Deslocamento/Sa\xedda: ".concat(a.city),assetsProcessed:0,costs:{transport:a.intercityCost||0,lodging:0,perDiem:0,technician:0}}),c(new Date(i),i=m(i))}}return e.itinerary.length>0&&n.push({dateISO:i.toISOString().split("T")[0],type:"RETURN",city:e.global.originCity,detail:"Retorno para cidade de origem",assetsProcessed:0,costs:{transport:e.returnTransportCost||0,lodging:0,perDiem:0,technician:0}}),n.sort((e,t)=>new Date(e.dateISO).getTime()-new Date(t.dateISO).getTime()),{days:n,totalDays:n.length,totalAssets:l,totalCosts:0}}function o(e,t){let a={transport:0,lodging:0,perDiem:0,technician:0,total:0};return t.days.filter(e=>"DESCANSO"!==e.type).forEach(e=>{a.transport+=e.costs.transport,a.lodging+=e.costs.lodging,a.perDiem+=e.costs.perDiem,a.technician+=e.costs.technician}),a.total=a.transport+a.lodging+a.perDiem+a.technician,a}a.d(t,{T:function(){return o},a:function(){return r}})}},function(e){e.O(0,[139,358,231,161,971,23,744],function(){return e(e.s=1218)}),_N_E=e.O()}]);